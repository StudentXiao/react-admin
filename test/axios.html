<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<button id="btn1">btn1</button>
<button id="btn2">btn2</button>
<button id="btn3">btn3</button>
<script src="https://cdn.bootcss.com/axios/0.19.0/axios.min.js"></script>

<script>
  const btn1 = document.getElementById('btn1');
  const btn2 = document.getElementById('btn2');
  const btn3 = document.getElementById('btn3');

  let token = '';
  btn1.addEventListener('click', function () {


    axios({
      method: 'POST',
      url: 'http://47.103.203.152/api/login',
      // data: {
      //   username: 'admin',
      //   password: 'admin'
      // },
      data: 'username=admin&password=admin',
      headers: {
        'content-type': 'application/x-www-form-urlencoded'
      }
    })
      .then((response) =>{
        // console.log(response);
        if (response.data.status === 0) {
          // 登录成功
          console.log(response.data.data);
          // 设置token
          token = response.data.data.token;
        }else {
          // 登录失败
          console.log(response.data.msg);
        }
      })
      .catch((err) =>{
        console.log(err);
        alert('网络出现文题');
      })
  });

  btn2.addEventListener('click', function () {
    axios({
      method: 'GET',
      url: 'http://47.103.203.152/api/category/get',
      headers: {
        authorization: 'Bearer ' + token
      }
    })
      .then((response) =>{
        if (response.data.status === 0) {
          // 获取成功
          console.log(response.data.data);
        }else {
          // 获取失败
          console.log(response.data.msg);
        }
      })
      .catch((err) =>{
        console.log(err);
        alert('网络错误，请重试');
      })
  });

  btn3.addEventListener('click', function () {
    axios({
      method: 'POST',
      url: 'http://47.103.203.152/api/category/add',
      headers:{
        'content-type': 'application/x-www-form-urlencoded',
        authorization: 'Bearer ' + token
      },
      data: 'categoryName=电脑'
    })
      .then((response) =>{
        if (response.data.status === 0) {
          // 添加成功
          console.log(response.data.data);
        }else {
          // 添加失败
          console.log(response.data.msg);
        }
      })
      .catch((err) =>{
        console.log(err);
        alert('网络错误，请重试')
      })
  })
</script>
</body>
</html>